<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magic Lyrics ðŸŽ¸</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="mandolin.svg" />
    <link rel="icon" type="image/png" sizes="16x16" href="mandolin.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="mandolin.svg" />

    <!-- Open Graph Meta Tags (for Facebook, LinkedIn, etc.) -->
    <meta property="og:title" content="Lyrics Auto Scroller ðŸŽ¸" />
    <meta property="og:description" content="Scroll through your favorite song lyrics effortlessly with this auto-scrolling tool!" />
    <meta property="og:image" content="https://yourwebsite.com/images/preview-image.jpg" />
    <meta property="og:url" content="https://yourwebsite.com/lyrics-auto-scroller" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Lyrics Auto Scroller ðŸŽ¸" />
    <meta name="twitter:description" content="Scroll through your favorite song lyrics effortlessly with this auto-scrolling tool!" />
    <meta name="twitter:image" content="https://yourwebsite.com/images/preview-image.jpg" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Righteous&family=Quicksand:wght@400;700&display=swap");

      body {
        background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
        background-size: 400% 400%;
        animation: gradientBG 15s ease infinite;
        font-family: "Quicksand", "Segoe UI", Arial, sans-serif;
        color: #e0e0e0;
        margin: 0;
        padding: 30px;
        min-height: 100vh;
        overflow-x: hidden;
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.08);
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 0 30px rgba(106, 90, 205, 0.4),
          0 0 60px rgba(186, 85, 211, 0.3),
          inset 0 0 20px rgba(255, 255, 255, 0.1);
        position: relative;
        animation: glow 3s ease-in-out infinite alternate;
      }

      @keyframes glow {
        from {
          box-shadow: 0 0 30px rgba(106, 90, 205, 0.4),
            0 0 60px rgba(186, 85, 211, 0.3),
            inset 0 0 20px rgba(255, 255, 255, 0.1);
        }
        to {
          box-shadow: 0 0 40px rgba(106, 90, 205, 0.7),
            0 0 80px rgba(186, 85, 211, 0.5),
            inset 0 0 30px rgba(255, 255, 255, 0.15);
        }
      }

      h1 {
        text-align: center;
        color: transparent;
        background: linear-gradient(45deg, #ff86ff, #9a66ff, #4dffff);
        background-size: 200% auto;
        background-clip: text;
        -webkit-background-clip: text;
        animation: shimmer 4s linear infinite;
        font-family: "Righteous", cursive;
        font-size: 3em;
        margin-bottom: 30px;
        text-shadow: 0 0 20px rgba(255, 105, 180, 0.7);
      }
      p {
        text-align: center;
        color: transparent;
        background: linear-gradient(45deg, #ff86ff, #9a66ff, #4dffff);
        background-size: 200% auto;
        background-clip: text;
        -webkit-background-clip: text;
        animation: shimmer 8s linear infinite;
        font-family: "Righteous", cursive;
        font-size: 1.2em;
        margin-bottom: 30px;
        text-shadow: 0 0 20px rgba(255, 105, 180, 0.7);
      }

      @keyframes shimmer {
        0% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 200% 50%;
        }
      }

      .music-notes {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
        z-index: -1;
      }

      .music-note {
        position: absolute;
        color: rgba(255, 255, 255, 0.3);
        font-size: 1.5em;
        animation: float 10s linear infinite;
      }

      @keyframes float {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100px) rotate(360deg);
          opacity: 0;
        }
      }

      .controls {
        margin: 20px 0;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: center;
        background: rgba(106, 90, 205, 0.15);
        padding: 20px;
        border-radius: 15px;
        position: relative;
        overflow: hidden;
      }

      .controls::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.1) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        transform: rotate(45deg);
        animation: shine 6s linear infinite;
        pointer-events: none;
      }

      @keyframes shine {
        0% {
          transform: translateX(-100%) rotate(45deg);
        }
        100% {
          transform: translateX(100%) rotate(45deg);
        }
      }

      button,
      select {
        padding: 12px 22px;
        border: none;
        border-radius: 30px;
        background: linear-gradient(45deg, #6a5acd, #ba55d3, #ff69b4);
        background-size: 200% auto;
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px rgba(106, 90, 205, 0.5);
        font-weight: 600;
      }

      button:hover,
      select:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 0 25px rgba(186, 85, 211, 0.8);
        background-position: right center;
      }

      input[type="text"] {
        width: 200px;
        padding: 12px 22px;
        border: none;
        border-radius: 30px;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
      }

      input[type="text"]::placeholder {
        color: rgba(255, 255, 255, 0.6);
      }

      .lyrics-box {
        height: 400px; /* Fixed height instead of min-height */
        max-height: 400px; /* Ensure it doesn't grow beyond this */
        background: rgba(255, 255, 255, 0.08);
        padding: 30px;
        border-radius: 15px;
        overflow-y: auto; /* This is correct - keeps the scrollbar when needed */
        white-space: pre-wrap;
        word-wrap: break-word;
        line-height: 1.8;
        font-size: 1.1em;
        box-shadow: inset 0 0 20px rgba(106, 90, 205, 0.2);
        position: relative;
      }

      .lyrics-box:empty::before {
        content: attr(data-placeholder);
        color: rgba(224, 224, 224, 0.5);
        position: absolute;
        pointer-events: none;
      }

      .scrolling-indicator {
        position: absolute;
        right: 15px;
        bottom: 15px;
        background: rgba(106, 90, 205, 0.3);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: none;
        justify-content: center;
        align-items: center;
        animation: fadeInOut 1.5s ease-in-out infinite;
      }

      @keyframes fadeInOut {
        0%,
        100% {
          opacity: 0.3;
        }
        50% {
          opacity: 0.8;
        }
      }

      ::-webkit-scrollbar {
        width: 10px;
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(45deg, #6a5acd, #ba55d3);
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <div class="music-notes"></div>
    <div class="container">
      <h1>Magic Lyrics</h1>
      <p>Lyrics Auto Scroller</p>

      <div class="controls">
        <input type="text" id="songTitle" placeholder="âœ¨ Song Title" />
        <input type="text" id="artistName" placeholder="ðŸŽ¤ Artist Name" />
        <button id="scrollButton" onclick="toggleScroll()">
          Play/Pause Scroll
        </button>
        <select id="scrollSpeed" onchange="updateSpeed()">
          <option value="1">Slow ðŸŽ¶</option>
          <option value="2" selected>Medium ðŸŽµ</option>
          <option value="3">Fast ðŸŽ¸</option>
        </select>
        <button onclick="formatText('bold')">Bold</button>
        <button onclick="formatText('italic')">Italic</button>
        <button onclick="formatText('justifyLeft')">Left</button>
        <button onclick="formatText('justifyCenter')">Center</button>
        <button onclick="formatText('justifyRight')">Right</button>
        <button onclick="document.getElementById('fileInput').click()">
          Open File
        </button>
        <input
          type="file"
          id="fileInput"
          style="display: none"
          accept=".txt,.las,.md"
          onchange="openFile(event)"
        />
        <button id="saveButton" onclick="saveLyrics()">Save Lyrics</button>
      </div>

      <div
        contenteditable="true"
        class="lyrics-box"
        id="lyrics"
        data-placeholder="âœ¨ Paste your lyrics here and watch them glow... âœ¨"
      ></div>
      <div class="scrolling-indicator" id="scrollIndicator">â–¼</div>
    </div>

    <script>
      let scrolling = false;
      let scrollInterval;
      const lyricsBox = document.getElementById("lyrics");

      // Clean pasted text
      lyricsBox.addEventListener("paste", (e) => {
        e.preventDefault();
        const text = (e.clipboardData || window.clipboardData).getData(
          "text/plain"
        );
        const cleanText = text
          .replace(/[^\x20-\x7E\n]/g, "") // Remove non-printable characters except newlines
          .trim();
        document.execCommand("insertText", false, cleanText);
      });

      // Toggle scroll functionality
      function toggleScroll() {
        const scrollButton = document.getElementById("scrollButton");
        const scrollIndicator = document.getElementById("scrollIndicator");

        if (!scrolling) {
          // Check if we have content to scroll
          if (
            lyricsBox.scrollHeight <= lyricsBox.clientHeight ||
            !lyricsBox.textContent.trim()
          ) {
            alert("Please add more lyrics to enable scrolling");
            return;
          }

          scrollButton.textContent = "Pause Scroll";
          scrollButton.style.background =
            "linear-gradient(45deg, #FF6B6B, #FF8E53)";
          scrollIndicator.style.display = "flex";
          startScroll();
          scrolling = true;
        } else {
          scrollButton.textContent = "Play Scroll";
          scrollButton.style.background = "";
          scrollIndicator.style.display = "none";
          stopScroll();
          scrolling = false;
        }
      }

      // Start scrolling
      function startScroll() {
        const speed = parseInt(document.getElementById("scrollSpeed").value);
        stopScroll(); // Clear any existing interval

        scrollInterval = setInterval(() => {
          lyricsBox.scrollTop += speed;

          // If we're near the bottom, reset to top
          if (
            lyricsBox.scrollTop >=
            lyricsBox.scrollHeight - lyricsBox.clientHeight - 10
          ) {
            lyricsBox.scrollTop = 0;
          }
        }, 150);
      }

      // Stop scrolling
      function stopScroll() {
        if (scrollInterval) {
          clearInterval(scrollInterval);
          scrollInterval = null;
        }
      }

      // Update scroll speed
      function updateSpeed() {
        if (scrolling) {
          startScroll(); // This will call stopScroll() first
        }
      }

      // Format text
      function formatText(command) {
        document.execCommand(command, false, null);
        lyricsBox.focus();
      }

      // Open file
      // Save lyrics with formatting information
      function saveLyrics() {
        const songTitle =
          document.getElementById("songTitle").value || "Untitled";
        const artistName =
          document.getElementById("artistName").value || "Unknown";

        // Get the HTML content to preserve formatting
        const formattedContent = lyricsBox.innerHTML;

        // Create a simple format that preserves basic formatting
        // Store as JSON with metadata and content
        const saveData = {
          title: songTitle,
          artist: artistName,
          content: formattedContent,
          version: "1.0",
        };

        const jsonContent = JSON.stringify(saveData);

        // Save as .mag(MusicLyric Glow) file
        const blob = new Blob([jsonContent], { type: "application/json" });
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = `${artistName} - ${songTitle}.mag`;
        link.click();

        // Save animation
        const saveButton = document.getElementById("saveButton");
        saveButton.style.background = "#4CAF50";
        saveButton.textContent = "Saved! âœ“";
        setTimeout(() => {
          saveButton.style.background = "";
          saveButton.textContent = "Save Lyrics";
        }, 2000);
      }

      // Open file with preserved formatting
      function openFile(event) {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();

        // Handle different file formats
        if (file.name.endsWith(".mag")) {
          // Our custom format with formatting
          reader.onload = (e) => {
            try {
              const saveData = JSON.parse(e.target.result);

              // Restore metadata
              document.getElementById("songTitle").value = saveData.title || "";
              document.getElementById("artistName").value =
                saveData.artist || "";

              // Restore formatted content
              lyricsBox.innerHTML = saveData.content;
            } catch (error) {
              console.error("Error parsing file:", error);
              alert("Could not open file. The file may be corrupted.");
            }
          };
          reader.readAsText(file);
        } else {
          // Plain text file (.txt)
          reader.onload = (e) => {
            const text = e.target.result;

            // Try to extract title and artist
            const lines = text.split("\n");
            if (lines[0].includes(" - ")) {
              const [title, artist] = lines[0].split(" - ");
              document.getElementById("songTitle").value = title.trim();
              document.getElementById("artistName").value = artist.trim();
              lyricsBox.textContent = lines.slice(2).join("\n");
            } else {
              lyricsBox.textContent = text;
            }
          };
          reader.readAsText(file);
        }
      }

      // Floating music notes
      function createMusicNotes() {
        const notes = ["â™ª", "â™«", "â™©", "â™¬", "ðŸŽµ", "ðŸŽ¶"];
        const musicNotesContainer = document.querySelector(".music-notes");
        for (let i = 0; i < 20; i++) {
          const note = document.createElement("div");
          note.className = "music-note";
          note.textContent = notes[Math.floor(Math.random() * notes.length)];
          const left = Math.random() * 100;
          const delay = Math.random() * 10;
          const duration = 10 + Math.random() * 20;
          note.style.left = `${left}%`;
          note.style.animationDelay = `${delay}s`;
          note.style.animationDuration = `${duration}s`;
          musicNotesContainer.appendChild(note);
        }
      }

      // Initialize
      window.onload = () => {
        createMusicNotes();
      };
    </script>
  </body>
</html>
